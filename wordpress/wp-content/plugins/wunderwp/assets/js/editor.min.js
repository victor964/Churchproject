!function i(s,a,l){function p(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return p(s[t][1][e]||e)},o,o.exports,i,s,a,l)}return a[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)p(l[e]);return p}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=elementor.modules.controls.BaseData.extend({excludeControls:["text","number","textarea","icon","icons","url","media","gallery","wysiwyg","date_time","raven_media","raven-posts","raven_file_uploader"],widgetType:"",syncing:!1,ui:function(){var e=elementor.modules.controls.BaseMultiple.prototype.ui.apply(this,arguments);return e.presetItems=".wunderwp-element-custom-presets",e.presetItem=".wunderwp-element-custom-presets-item",e.presetAddBtn=".wunderwp-element-custom-presets-add-btn",e.presetDeleteBtn=".wunderwp-element-custom-presets-item-delete",e.presetApplyBtn=".wunderwp-element-custom-presets-item-apply",e.presetInput=".wunderwp-element-custom-presets-input",e.presetInputWrapper=".wunderwp-element-custom-presets-input-wrapper",e},events:function(){return _.extend(elementor.modules.controls.BaseMultiple.prototype.events.apply(this,arguments),{"click @ui.presetAddBtn ":"onAddPreset","click @ui.presetDeleteBtn":"onDeletePreset","click @ui.presetApplyBtn":"onApplyPreset"})},onReady:function(){this.widgetType=this.settingsModel().get("widgetType"),window.wunderWpCustomPresets=window.wunderWpCustomPresets||{},this.loadPresets(this.widgetType),elementor.channels.data.bind("wunderwp:presets:sync",this.onPresetsSync.bind(this))},onPresetsSync:function(e){var t=this;if(!this.syncing){this.syncing=!0;var n=window.wunderWpCustomPresets||{};window.wunderWpCustomPresets={},this.loadPresets(this.widgetType,function(){t.syncing=!1},function(){t.syncing=!1,window.wunderWpCustomPresets=n})}},loadPresets:function(e,t,n){var r=this;this.isPresetDataLoaded()?this.ui.presetItems.removeClass("loading"):(this.ui.presetItems.addClass("loading"),wp.ajax.post("wunderwp_element_custom_presets",{_ajax_nonce:window.wunderwp_editor.element_custom_presets_nonce,element:e}).done(function(e){t&&t(),r.setPresets(e),r.setValue(null),r.ui.presetItems.removeClass("loading"),r.render()}).fail(function(){n&&n(),r.setPresets([]),r.ui.presetItems.removeClass("loading")}))},getPresets:function(){return window.wunderWpCustomPresets&&jQuery.extend(!0,[],window.wunderWpCustomPresets[this.widgetType])||[]},setPresets:function(e){window.wunderWpCustomPresets[this.widgetType]=e},setPreset:function(e){var t=window.wunderWpCustomPresets[this.widgetType];t?t.unshift(e):window.wunderWpCustomPresets[this.widgetType]=[e]},isPresetDataLoaded:function(){return!!window.wunderWpCustomPresets[this.widgetType]},onApplyPreset:function(e){var t=jQuery(e.target).closest(this.ui.presetApplyBtn),n=jQuery(e.target).closest(this.ui.presetItem).data("preset-id"),r=_.find(window.wunderWpCustomPresets[this.widgetType],{id:n.toString()});r&&(r=jQuery.extend(!0,{},r),t.tipsy("hide"),this.applyPreset(this.elementDefaultSettings(),r),this.setValue(null))},onAddPreset:function(e){var t=this,n=jQuery(e.target).closest(this.ui.presetInputWrapper).find(this.ui.presetInput).val();if(n&&0!==n.trim().length){var r=jQuery.extend(!0,{},this.settingsModel().attributes);delete r.wunderwp_presets,delete r.wunderwp_custom_presets;var o={title:n,content:JSON.stringify(r),element_type:this.settingsModel().get("widgetType"),elementor_version:window.elementor.config.version,domain:window.location.hostname};this.ui.presetAddBtn.attr("disabled","disabled"),this.ui.presetAddBtn.find(".fa").removeClass("fa-plus-circle").addClass("fa-spin fa-spinner"),wp.ajax.post("wunderwp_store_custom_preset",{_ajax_nonce:window.wunderwp_editor.store_custom_preset_nonce,data:o}).done(function(e){t.ui.presetAddBtn.removeAttr("disabled"),t.ui.presetAddBtn.find(".fa").removeClass("fa-spin").removeClass("fa-spinner").addClass("fa-plus-circle"),t.hideToolTip(),t.setPreset(e),t.render()}).fail(function(){t.ui.presetAddBtn.removeAttr("disabled"),t.ui.presetAddBtn.find(".fa").removeClass("fa-spin").removeClass("fa-spinner").addClass("fa-plus-circle")})}},onDeletePreset:function(e){var t=this,n=window.wunderwp_editor,r=null,o=jQuery(e.target).closest(this.ui.presetItem),i=_.findWhere(this.getPresets(),{id:o.data("preset-id").toString()}),s={id:"elementor-fatal-error-dialog",headerMessage:i.title,message:n.dialog_delete_preset_msg,position:{my:"center center",at:"center center"},strings:{confirm:n.delete,cancel:n.cancel},onConfirm:function(){t.deletePreset(i,r)},onCancel:function(){r.hide()},hide:{onBackgroundClick:!1,onButtonClick:!1}};r=window.elementor.dialogsManager.createWidget("confirm",s),this.hideToolTip(),r.show()},deletePreset:function(t,n){var r=this,e=window.wunderwp_editor;n.setMessage(e.deleting+' <span class="fa fa-spin fa-spinner"></span>'),wp.ajax.post("wunderwp_delete_custom_preset",{_ajax_nonce:window.wunderwp_editor.delete_custom_preset_nonce,id:t.id,element_type:t.element_type}).done(function(){var e=_.findIndex(window.wunderWpCustomPresets[r.widgetType],{id:t.id});window.wunderWpCustomPresets[r.widgetType].splice(e,1),r.render(),n.hide()}).fail(function(){n.setMessage(e.dialog_delete_preset_error_msg)})},settingsModel:function(){var e=window.elementor.config.version;return(0,window.elementor.helpers.compareVersions)(e,"2.8.0","<")?this.elementSettingsModel:this.container.settings},applyPreset:function(e,t){var n=0<arguments.length&&void 0!==e?e:{},r=t,o=JSON.parse(r.content);for(var i in o)if(this.model.get("name")!==i){var s=this.settingsModel().controls[i];void 0!==s&&(0<=this.excludeControls.indexOf(s.type)||(s.is_repeater?n[i]=new window.Backbone.Collection(this.getRepeaterSetting(s,i,o),{model:_.partial(this.createRepeaterItemModel,_,_,s.fields)}):n[i]=o[i]))}n.wunderwp_presets=null,n.wunderwp_custom_presets=this.settingsModel().get("wunderwp_custom_presets"),this.applyPresetSettings(n)},applyPresetSettings:function(e){var t=window.elementor.config.version;if((0,window.elementor.helpers.compareVersions)(t,"2.8.0","<"))for(var n in this.settingsModel().controls)this.settingsModel().set(n,e[n]);else this.settingsModel().set(e),this.container.view.renderUI(),this.container.view.renderHTML()},getRepeaterSetting:function(e,t,n){var r=this.settingsModel().get(t),o=jQuery.extend(!0,[],n[t]),i=[];if(r.models){for(var s=0;s<r.models.length;s++){var a=r.models[s],l={};for(var p in a.controls)0<=this.excludeControls.indexOf(a.controls[p].type)?l[p]=a.get(p):s>o.length-1?l[p]=a.get(p):l[p]=o[s][p];i.push(l)}return i}},createRepeaterItemModel:function(e,t,n){return(t=t||{}).controls=n,e._id||(e._id=elementor.helpers.getUniqueID()),new window.elementorModules.editor.elements.models.BaseSettings(e,t)},elementDefaultSettings:function(){var n=this,e=n.settingsModel().controls,r={};return jQuery.each(e,function(e,t){0<=n.excludeControls.indexOf(t.type)?r[e]=n.settingsModel().get(e):r[e]=t.default}),r},hideToolTip:function(){jQuery.each(jQuery(this.ui.presetDeleteBtn.selector),function(){jQuery(this).tipsy("hide")}),jQuery.each(jQuery(this.ui.presetApplyBtn.selector),function(){jQuery(this).tipsy("hide")})},onBeforeDestroy:function(){elementor.channels.data.unbind("wunderwp:presets:sync")}});n.default=r},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=elementor.modules.controls.BaseData.extend({excludeControls:["text","number","textarea","icon","icons","url","media","gallery","wysiwyg","date_time","raven_media","raven-posts","raven_file_uploader"],syncing:!1,ui:function(){var e=elementor.modules.controls.BaseMultiple.prototype.ui.apply(this,arguments);return e.presetItems=".wunderwp-element-presets",e.presetItem=".wunderwp-element-presets-item",e},events:function(){return _.extend(elementor.modules.controls.BaseMultiple.prototype.events.apply(this,arguments),{"click @ui.presetItem ":"onPresetClick"})},onReady:function(){window.wunderWpPresets=window.wunderWpPresets||{},this.loadPresets(this.settingsModel().get("widgetType")),elementor.channels.data.bind("wunderwp:element:after:reset:style",this.onElementAfterResetStyle.bind(this)),elementor.channels.data.bind("wunderwp:element:before:reset:style",this.onElementBeforeResetStyle.bind(this)),elementor.channels.data.bind("wunderwp:presets:sync",this.onPresetsSync.bind(this))},onElementAfterResetStyle:function(e){e.id===this.container.model.id&&this.isRendered&&this.render()},onElementBeforeResetStyle:function(e){e.id===this.container.model.id&&this.applyPresetSettings(this.elementDefaultSettings())},onPresetClick:function(e){var t=jQuery(e.currentTarget);t.siblings(".wunderwp-element-presets-item").removeClass("active"),t.addClass("active");var n=_.find(this.getPresets(),{id:t.data("preset-id")});this.applyPreset(this.elementDefaultSettings(),n)},onPresetsSync:function(e){var t=this;if(!this.syncing){this.syncing=!0;var n=window.wunderWpPresets||{};window.wunderWpPresets={},this.loadPresets(this.settingsModel().get("widgetType"),function(){t.syncing=!1},function(){t.syncing=!1,window.wunderWpPresets=n})}},settingsModel:function(){var e=window.elementor.config.version;return(0,window.elementor.helpers.compareVersions)(e,"2.8.0","<")?this.elementSettingsModel:this.container.settings},applyPreset:function(e,t){var n=0<arguments.length&&void 0!==e?e:{},r=t;for(var o in r.widget.settings)if(this.model.get("name")!==o&&"wunderwp_custom_presets"!==o){var i=this.settingsModel().controls[o];void 0!==i&&(0<=this.excludeControls.indexOf(i.type)||(i.is_repeater?n[o]=new window.Backbone.Collection(this.getRepeaterSetting(i,o,r),{model:_.partial(this.createRepeaterItemModel,_,_,i.fields)}):n[o]=r.widget.settings[o]))}n.wunderwp_presets=this.settingsModel().get("wunderwp_presets"),n.wunderwp_custom_presets=this.settingsModel().get("wunderwp_custom_presets"),this.applyPresetSettings(n)},applyPresetSettings:function(e){var t=window.elementor.config.version;if((0,window.elementor.helpers.compareVersions)(t,"2.8.0","<"))for(var n in this.settingsModel().controls)this.settingsModel().set(n,e[n]);else this.settingsModel().set(e),this.container.view.renderUI(),this.container.view.renderHTML(),this.setValue(null)},getRepeaterSetting:function(e,t,n){var r=this.settingsModel().get(t),o=jQuery.extend(!0,[],n.widget.settings[t]),i=[];if(r.models){for(var s=0;s<r.models.length;s++){var a=r.models[s],l={};for(var p in a.controls)0<=this.excludeControls.indexOf(a.controls[p].type)?l[p]=a.get(p):s>o.length-1?l[p]=a.get(p):l[p]=o[s][p];i.push(l)}return i}},createRepeaterItemModel:function(e,t,n){return(t=t||{}).controls=n,e._id||(e._id=elementor.helpers.getUniqueID()),new window.elementorModules.editor.elements.models.BaseSettings(e,t)},elementDefaultSettings:function(){var n=this,e=n.settingsModel().controls,r={};return jQuery.each(e,function(e,t){0<=n.excludeControls.indexOf(t.type)?r[e]=n.settingsModel().get(e):r[e]=t.default}),r},loadPresets:function(e,t,n){var r=this;if(this.isPresetDataLoaded()){if(0===this.getPresets().length)return;0===this.ui.presetItem.length&&this.render()}else this.ui.presetItems.addClass("loading"),wp.ajax.post("wunderwp_element_presets",{_ajax_nonce:window.wunderwp_editor.element_presets_nonce,element:e}).done(function(e){t&&t(),r.ui.presetItems.removeClass("loading"),r.setPresets(e),r.setValue(null),r.render()}).fail(function(){n&&n(),r.ui.presetItems.removeClass("loading"),r.setPresets([])})},getPresets:function(){return window.wunderWpPresets&&window.wunderWpPresets[this.settingsModel().get("widgetType")]||[]},setPresets:function(e){window.wunderWpPresets[this.settingsModel().get("widgetType")]=e},isPresetDataLoaded:function(){return!!window.wunderWpPresets[this.settingsModel().get("widgetType")]},onBeforeDestroy:function(){elementor.channels.data.unbind("wunderwp:element:after:reset:style"),elementor.channels.data.unbind("wunderwp:presets:sync")}});n.default=r},{}],3:[function(r,e,t){"use strict";var o,i,n;o=jQuery,i=window,(n=i.wunderwp||{}).editor=new function(){var t=this;function e(e){"widget"===e.get("elType")&&(function(e){e.get("settings").controls.wunderwp_presets&&e.setSetting("wunderwp_presets",null)}(e),elementor.channels.data.trigger("wunderwp:element:after:reset:style",e))}function n(e){elementor.channels.data.trigger("wunderwp:element:before:reset:style",e)}o(i).on("elementor:init",function(){!function(){for(var e in t.controls={presets:r("./controls/presets").default,custom_presets:r("./controls/custom-presets").default},t.controls)elementor.addControlView("wunderwp_"+e,t.controls[e])}(),elementor.channels.data.bind("element:after:reset:style",e),elementor.channels.data.bind("element:before:reset:style",n),o(".wunderwp-presets-sync span").off("click","**"),o(document).on("click",".wunderwp-presets-sync span",function(){var e=this;o(this).find("i").hasClass("eicon-animation-spin")||(o(this).find("i").addClass("eicon-animation-spin"),wp.ajax.post("wunderwp_sync_libraries",{_ajax_nonce:o(this).data("nonce"),library:"presets"}).done(function(){o(e).find("i").removeClass("eicon-animation-spin"),elementor.channels.data.trigger("wunderwp:presets:sync",o(e).data("element"))}).fail(function(){return o(e).find("i").removeClass("eicon-animation-spin")}))}),function(){t.templates=r("./template-library/manager"),t.templates.init();var e="preview:loaded";(0,i.elementor.helpers.compareVersions)(i.elementor.config.version,"2.8.5",">")&&(e="document:loaded"),elementor.on(e,function(){0<elementor.$previewContents.find(".wunderwp-add-template-button").length||elementor.$previewContents.find(".elementor-add-new-section .elementor-add-template-button").after('<div\n          class="elementor-add-section-area-button wunderwp-add-template-button"\n          title="Add WunderWP Template">\n          <svg xmlns="http://www.w3.org/2000/svg" width="27.69" height="27.69"><path d="M16.02 11.32c0-.1-.08-.18-.18-.18-4.18 0-6.3-3.3-6.3-9.79 0-.1-.08-.18-.18-.18-.1 0-.18.08-.18.18 0 6.5-2.12 9.79-6.3 9.79-.1 0-.18.08-.18.18 0 .1.08.18.18.18 4.18 0 6.3 3.3 6.3 9.79 0 .1.08.18.18.18.1 0 .18-.08.18-.18 0-6.5 2.12-9.79 6.3-9.79.1 0 .18-.08.18-.18zm8.72 2.83c-2.56 0-3.86-2.03-3.86-6.04 0-.1-.08-.18-.18-.18-.1 0-.18.08-.18.18 0 4.01-1.3 6.04-3.86 6.04-.1 0-.18.08-.18.18s.08.18.18.18c2.56 0 3.86 2.03 3.86 6.04 0 .1.08.18.18.18.1 0 .18-.08.18-.18 0-4.01 1.3-6.04 3.86-6.04.1 0 .18-.08.18-.18s-.08-.18-.18-.18zm-6.99 8.66c-1.59 0-2.4-1.28-2.4-3.8 0-.1-.08-.18-.18-.18-.1 0-.18.08-.18.18 0 2.52-.81 3.8-2.4 3.8-.1 0-.18.08-.18.18 0 .1.08.18.18.18 1.59 0 2.4 1.28 2.4 3.8 0 .1.08.18.18.18.1 0 .18-.08.18-.18 0-2.52.81-3.8 2.4-3.8.1 0 .18-.08.18-.18 0-.1-.08-.18-.18-.18z" fill="#fff"/></svg>\n        </div>').find("~ .wunderwp-add-template-button").on("click",function(){$e.run("wunderwp-library/open")})})}()})},i.wunderwp=n},{"./controls/custom-presets":1,"./controls/presets":2,"./template-library/manager":7}],4:[function(e,t,n){"use strict";var r;r=Marionette.Behavior.extend({ui:{insertButton:".elementor-template-library-template-insert"},events:{"click @ui.insertButton":"onInsertButtonClick"},onInsertButtonClick:function(){var e=elementor.config.document.remoteLibrary.autoImportSettings;e||!this.view.model.get("hasPageSettings")?wunderwp.editor.templates.importTemplate(this.view.model,{withPageSettings:e}):r.showImportDialog(this.view.model)}},{dialog:null,showImportDialog:function(e){var t=r.getDialog();t.onConfirm=function(){wunderwp.editor.templates.importTemplate(e,{withPageSettings:!0})},t.onCancel=function(){wunderwp.editor.templates.importTemplate(e)},t.show()},initDialog:function(){r.dialog=elementorCommon.dialogsManager.createWidget("confirm",{id:"elementor-insert-template-settings-dialog",headerMessage:elementor.translate("import_template_dialog_header"),message:elementor.translate("import_template_dialog_message")+"<br>"+elementor.translate("import_template_dialog_message_attention"),strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("no")}})},getDialog:function(){return r.dialog||r.initDialog(),r.dialog}}),t.exports=r},{}],5:[function(e,t,n){"use strict";var r,o=e("../models/template");r=Backbone.Collection.extend({model:o}),t.exports=r},{"../models/template":8}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:s(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(n):void 0}var i=e("./views/library-layout"),a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,elementorModules.common.ComponentModal),r(l,[{key:"__construct",value:function(e){this.docLibraryConfig=elementor.config.document.remoteLibrary,s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"__construct",this).call(this,e),this.setDefaultRoute("templates/pre-made")}},{key:"getNamespace",value:function(){return"wunderwp-library"}},{key:"getModalLayout",value:function(){return i}},{key:"defaultTabs",value:function(){return{"templates/pre-made":{title:"Pre-made",filter:{source:"pre-made"}},"templates/custom":{title:"Custom",filter:{source:"custom"}}}}},{key:"defaultRoutes",value:function(){var t=this;return{import:function(){t.manager.layout.showImportView()},preview:function(e){t.manager.layout.showPreviewView(e.model)}}}},{key:"defaultCommands",value:function(){return Object.assign(s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"defaultCommands",this).call(this),{open:this.show})}},{key:"getTabsWrapperSelector",value:function(){return"#elementor-template-library-header-menu"}},{key:"renderTab",value:function(e){this.manager.setScreen(this.tabs[e].filter)}},{key:"activateTab",value:function(e){$e.routes.saveState("wunderwp-library"),s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"activateTab",this).call(this,e)}},{key:"open",value:function(){return s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"open",this).call(this),this.manager.layout||(this.manager.layout=this.layout),!0}},{key:"close",value:function(){return!!s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"close",this).call(this)&&(this.manager.modalConfig={},!0)}},{key:"show",value:function(e){!(this.manager.modalConfig=e).toDefault&&$e.routes.restoreState("wunderwp-library")||$e.route(this.getDefaultRoute())}}]),l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}n.default=a},{"./views/library-layout":9}],7:[function(e,t,n){"use strict";var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./component"),l=(r=o)&&r.__esModule?r:{default:r};var i,p=e("./collections/templates");i=function(){this.modalConfig={};var i=this,r={},e=void 0,t=void 0,o=void 0,n={},s={};this.init=function(){!function(){var n={saveDialog:{description:elementor.translate("save_your_template_description")},ajaxParams:{success:function(e){$e.route("wunderwp-library/templates/my-templates",{onBefore:function(){o&&(o.findWhere({template_id:e.template_id})||o.add(e))}})},error:function(e){i.showErrorDialog(e)}}};_.each(["page","section",elementor.config.document.type],function(e){var t=jQuery.extend(!0,{},n,{saveDialog:{title:elementor.translate("save_your_template",[elementor.translate(e)])}});i.registerTemplateType(e,t)})}(),s={text:{callback:function(t){return t=t.toLowerCase(),0<=this.get("title").toLowerCase().indexOf(t)||_.any(this.get("tags"),function(e){return 0<=e.toLowerCase().indexOf(t)})}},type:{},subtype:{},favorite:{},plugins:{callback:function(e){return _.isEqual(e.split(","),this.get("plugins"))}}},this.component=$e.components.register(new l.default({manager:this})),elementor.addBackgroundClickListener("libraryToggleMore",{element:".elementor-template-library-template-more"}),this.modifyElementorTemplates()},this.modifyElementorTemplates=function(){var i=this,e=jQuery("#tmpl-elementor-template-library-save-template"),t=e.text();t=t.replace(/<.form>/gm,'<div class="wunderwp-checkbox">\n      <input type="checkbox" name="wunderwp" id="elementor-template-library-save-template-wunderwp">\n      <label for="elementor-template-library-save-template-wunderwp">Save to WunderWP</label>\n    </div> $&'),e.text(t),jQuery(document).on("submit","#elementor-template-library-save-template-form",function(){var e=new URLSearchParams(jQuery(this).serialize()),t=e.get("title"),r=!1;if(null!=e.get("wunderwp")){var n=elementor.templates.getTemplatesCollection();void 0!==n?n.bind("add",function(e){r=e.attributes.template_id}):jQuery(document).ajaxSuccess(function(e,t,n){void 0!==t.responseJSON.data&&void 0!==t.responseJSON.data.responses&&void 0!==t.responseJSON.data.responses.save_template&&"number"==typeof t.responseJSON.data.responses.save_template.data.template_id&&(r=t.responseJSON.data.responses.save_template.data.template_id,jQuery(this).unbind("ajaxSuccess"))});var o=setInterval(function(){r&&(clearInterval(o),i.saveTemplate(r,t))},100,t,r)}});var n=jQuery("#tmpl-elementor-template-library-template-local"),r=n.text();r=r.replace(/<div class="elementor-template-library-template-delete">/gm,'<# if (typeof saved_to_wunderwp !== \'undefined\') { #>\n      <# if ( ! saved_to_wunderwp ) { #>\n        <div class="wunderwp-template-library-template-save" data-wunderwp-post-id="{{ template_id }}" data-wunderwp-title="{{ title }}">\n          <i class="eicon-cloud-upload" aria-hidden="true"></i>\n          <span class="elementor-template-library-template-control-title">Save to WunderWP</span>\n        </div>\n      <# } else { #>\n        <div class="wunderwp-template-library-template-delete" data-wunderwp-post-id="{{ template_id }}" data-wunderwp-title="{{ title }}">\n          <i class="eicon-trash-o" aria-hidden="true"></i>\n          <span class="elementor-template-library-template-control-title">Delete from WunderWP</span>\n        </div>\n      <# } #>\n    <# } #> $&'),n.text(r),jQuery(document).on("click",".wunderwp-template-library-template-save",function(){i.saveTemplate(jQuery(this).data("wunderwpPostId"),jQuery(this).data("wunderwpTitle"))}).on("click",".wunderwp-template-library-template-delete",function(){var e=jQuery(this);i.deleteTemplate(jQuery(this).data("wunderwpPostId"),{onConfirm:function(){e.parents(".elementor-template-library-template-controls").find(".elementor-template-library-template-more-toggle > i").removeClass("eicon-ellipsis-h").addClass("eicon-loading eicon-animation-spin")},onSuccess:function(e,t,n){t.find(n).set("saved_to_wunderwp",!1),elementor.templates.showTemplates()}})})},this.getTemplateTypes=function(e){return e?r[e]:r},this.registerTemplateType=function(e,t){r[e]=t},this.deleteTemplate=function(n,r){var e=i.getDeleteDialog(),o=elementor.templates.getTemplatesCollection()||{};"object"!==(void 0===n?"undefined":a(n))&&(n=o.findWhere({template_id:+n})),e.onConfirm=function(){var e=n.get("template_id"),t=n.get("post_id");r.onConfirm&&r.onConfirm(),n.get("saved_to_wunderwp")&&(t=e,e=!1),elementorCommon.ajax.addRequest("wunderwp_delete_template",{data:{source:"custom",template_id:e,post_id:t},success:function(e){r.onSuccess&&r.onSuccess(e,o,n)}})},e.show()},this.importTemplate=function(n,r){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=this,t=n.get("inactive_plugins")||{};if(r=r||{},t.length&&e)return elementorCommon.dialogsManager.createWidget("confirm",{headerMessage:"Missing Required Plugin(s)",message:"This template requires <b>"+t+"</b> plugin(s) to be installed and activated. Clicking on <b>Continue</b> button, will import the template but some elements and settings may be missing.",strings:{confirm:"Continue"},defaultOption:"confirm",onConfirm:function(){o.importTemplate(n,r,!1)}}).show();o.layout.showLoadingView(),o.requestTemplateContent(n.get("source"),n.get("template_id"),{data:{page_settings:r.withPageSettings},success:function(e){var t=jQuery.extend({},o.modalConfig.importOptions);o.layout.hideLoadingView(),o.layout.hideModal(),elementor.channels.data.trigger("template:before:insert",n),elementor.getPreviewView().addChildModel(e.content,t),elementor.channels.data.trigger("template:after:insert",n),r.withPageSettings&&elementor.settings.page.model.setExternalChange(e.page_settings)},error:function(e){o.showErrorDialog(e)},complete:function(){o.layout.hideLoadingView()}})},this.saveTemplate=function(t,e){i.saveTemplateDialog||(i.saveTemplateDialog=elementorCommon.dialogsManager.createWidget("lightbox",{id:"wunderwp-save-template-dialog",headerMessage:'"'+e+'" Template is Saving to WunderWP',message:"Preparing the template.<br>",hide:{onOutsideClick:!1,onOutsideContextMenu:!1,onBackgroundClick:!1,onEscKeyPress:!1}}).show());var n={data:{post_id:t},success:function(e){if(i.getSaveTemplateDialogMessage("Pre-saved the template.<br>"),+e.assets)return i.getSaveTemplateDialogMessage("Started to upload "+e.assets+" asset(s).<br>"),i.saveTemplateAsset(e);i.saveTemplateContent(e)},error:function(e){i.getSaveTemplateDialogError(e,t)}};elementorCommon.ajax.addRequest("wunderwp_save_template",n)},this.saveTemplateContent=function(e){var t=e,n={data:{post_id:t.post_id},success:function(e){i.getSaveTemplateDialogMessage("Content uploaded.<br>"),i.getSaveTemplateDialogMessage("The template saved successfully. ðŸŽ‰"),i.saveTemplateDialog.addButton({name:"ok",text:"Okay",callback:function(){elementor.templates.getTemplatesCollection().findWhere({template_id:+t.post_id}).set("saved_to_wunderwp",!0),elementor.templates.showTemplates(),i.saveTemplateDialog.hide(),i.saveTemplateDialog=!1}})},error:function(e){i.getSaveTemplateDialogError("Uploading content failed.",t.post_id)}};elementorCommon.ajax.addRequest("wunderwp_save_template_content",n)},this.saveTemplateAsset=function(e){var t=this,n=e,r={data:{post_id:n.post_id},success:function(e){if(t.getSaveTemplateDialogMessage('"'+e.uploaded+'" uploaded. ('+(+n.assets-+e.remaining)+"/"+ +n.assets+")<br>"),e.remaining)return t.saveTemplateDialog.refreshPosition(),t.saveTemplateAsset(n);t.saveTemplateContent(n)},error:function(e){t.getSaveTemplateDialogError(e,n.post_id)}};elementorCommon.ajax.addRequest("wunderwp_save_template_asset",r)},this.getSaveTemplateDialogError=function(e,t){i.saveTemplateDialog.getElements("message").append('<span class="wunderwp-save-template-dialog-error">'+e+"</span>"),i.saveTemplateDialog.addButton({name:"try_again",text:"Try Again",callback:function(){i.saveTemplateDialog.hide(),i.saveTemplateDialog=!1,elementor.templates.showTemplates(),elementorCommon.ajax.addRequest("wunderwp_delete_template",{data:{source:"custom",post_id:t}})}})},this.getSaveTemplateDialogMessage=function(e){var t=i.saveTemplateDialog.getElements("message");t.append(e),jQuery(t).animate({scrollTop:jQuery(t).prop("scrollHeight")})},this.requestTemplateContent=function(e,t,n){var r={unique_id:t,data:{source:e,edit_mode:!0,display:!0,template_id:t}};return n&&jQuery.extend(!0,r,n),elementorCommon.ajax.addRequest("wunderwp_get_template_data",r)},this.markAsFavorite=function(e,t){var n={data:{source:e.get("source"),template_id:e.get("template_id"),favorite:t}};return elementorCommon.ajax.addRequest("mark_template_as_favorite",n)},this.getDeleteDialog=function(){return e=e||elementorCommon.dialogsManager.createWidget("confirm",{id:"elementor-template-library-delete-dialog",headerMessage:elementor.translate("delete_template"),message:"Are you sure you want to delete this template from WunderWP?",strings:{confirm:elementor.translate("delete")}})},this.getErrorDialog=function(){return t=t||elementorCommon.dialogsManager.createWidget("alert",{id:"elementor-template-library-error-dialog",headerMessage:elementor.translate("an_error_occurred")})},this.getTemplatesCollection=function(){return o},this.getConfig=function(e){return e?n[e]?n[e]:{}:n},this.requestLibraryData=function(t){if(!o||t.forceUpdate){t.onBeforeUpdate&&t.onBeforeUpdate();var e={data:{},success:function(e){o=new p(e.templates),e.config&&(n=e.config),t.onUpdate&&t.onUpdate()}};t.forceSync&&(e.data.sync=!0),elementorCommon.ajax.addRequest("wunderwp_get_library_data",e)}else t.onUpdate&&t.onUpdate()},this.getFilter=function(e){return elementor.channels.templates.request("filter:"+e)},this.setFilter=function(e,t,n){elementor.channels.templates.reply("filter:"+e,t),n||elementor.channels.templates.trigger("filter:change")},this.getFilterTerms=function(e){return e?s[e]:s},this.setScreen=function(e){elementor.channels.templates.stopReplying(),i.setFilter("source",e.source,!0),i.setFilter("type",e.type,!0),i.setFilter("subtype",e.subtype,!0),i.showTemplates()},this.loadTemplates=function(e){i.requestLibraryData({onBeforeUpdate:i.layout.showLoadingView.bind(i.layout),onUpdate:function(){i.layout.hideLoadingView(),e&&e()}})},this.showTemplates=function(){i.layout.setHeaderDefaultParts(),i.loadTemplates(function(){var e=i.filterTemplates();i.layout.showTemplatesView(new p(e))})},this.filterTemplates=function(){var n=i.getFilter("source");return o.filter(function(e){if(n!==e.get("source"))return!1;var t=r[e.get("type")];return!t||!1!==t.showInLibrary})},this.showErrorDialog=function(e){if("object"===(void 0===e?"undefined":a(e))){var t="";_.each(e,function(e){t+="<div>"+e.message+".</div>"}),e=t}else e?e+=".":e="<i>&#60The error message is empty&#62</i>";i.getErrorDialog().setMessage(elementor.translate("templates_request_error")+'<div id="elementor-template-library-error-info">'+e+"</div>").show()}},t.exports=new i},{"./collections/templates":5,"./component":6}],8:[function(e,t,n){"use strict";t.exports=Backbone.Model.extend({defaults:{template_id:0,title:"",source:"",type:"",subtype:"",author:"",thumbnail:"",url:"",export_link:"",tags:[]}})},{}],9:[function(e,t,n){"use strict";var r=e("./parts/header-parts/actions"),o=e("./parts/header-parts/menu"),i=e("./parts/header-parts/preview"),s=e("./parts/header-parts/back"),a=e("./parts/templates"),l=e("./parts/import"),p=e("./parts/preview");t.exports=elementorModules.common.views.modal.Layout.extend({getModalOptions:function(){return{id:"wunderwp-template-library-modal"}},getLogoOptions:function(){return{title:"WunderWP Templates",click:function(){$e.run("wunderwp-library/open",{toDefault:!0})}}},getTemplateActionButton:function(e){var t="#tmpl-elementor-template-library-"+(e.isPro?"get-pro-button":"insert-button"),n=Marionette.TemplateCache.get(t);return Marionette.Renderer.render(n)},setHeaderDefaultParts:function(){var e=this.getHeaderView();e.tools.show(new r),e.menuArea.show(new o),this.showLogo()},showTemplatesView:function(e){this.modalContent.show(new a({collection:e}))},showImportView:function(){this.getHeaderView().menuArea.reset(),this.modalContent.show(new l)},showPreviewView:function(e){this.modalContent.show(new p({url:e.get("url")}));var t=this.getHeaderView();t.menuArea.reset(),t.tools.show(new i({model:e})),t.logoArea.show(new s)}})},{"./parts/header-parts/actions":10,"./parts/header-parts/back":11,"./parts/header-parts/menu":12,"./parts/header-parts/preview":13,"./parts/import":14,"./parts/preview":15,"./parts/templates":17}],10:[function(e,t,n){"use strict";t.exports=Marionette.ItemView.extend({template:"#tmpl-elementor-template-library-header-actions",id:"elementor-template-library-header-actions",ui:{import:"#elementor-template-library-header-import i",sync:"#elementor-template-library-header-sync i",save:"#elementor-template-library-header-save i"},events:{"click @ui.import":"onImportClick","click @ui.sync":"onSyncClick","click @ui.save":"onSaveClick"},onImportClick:function(){$e.route("wunderwp-library/import")},onSyncClick:function(){var e=this;e.ui.sync.addClass("eicon-animation-spin"),wunderwp.editor.templates.requestLibraryData({onUpdate:function(){e.ui.sync.removeClass("eicon-animation-spin"),$e.routes.refreshContainer("wunderwp-library")},forceUpdate:!0,forceSync:!0})},onSaveClick:function(){$e.route("wunderwp-library/save-template")}})},{}],11:[function(e,t,n){"use strict";t.exports=Marionette.ItemView.extend({template:"#tmpl-elementor-template-library-header-back",id:"elementor-template-library-header-preview-back",events:{click:"onClick"},onClick:function(){$e.routes.restoreState("wunderwp-library")}})},{}],12:[function(e,t,n){"use strict";t.exports=Marionette.ItemView.extend({template:"#tmpl-elementor-template-library-header-menu",id:"elementor-template-library-header-menu",templateHelpers:function(){return{tabs:$e.components.get("wunderwp-library").getTabs()}}})},{}],13:[function(e,t,n){"use strict";var r=e("../../../behaviors/insert-template");t.exports=Marionette.ItemView.extend({template:"#tmpl-wunderwp-template-library-header-preview",id:"elementor-template-library-header-preview",behaviors:{insertTemplate:{behaviorClass:r}}})},{"../../../behaviors/insert-template":4}],14:[function(e,t,n){"use strict";var r;r=Marionette.ItemView.extend({template:"#tmpl-elementor-template-library-import",id:"elementor-template-library-import",ui:{uploadForm:"#elementor-template-library-import-form",fileInput:"#elementor-template-library-import-form-input"},events:{"change @ui.fileInput":"onFileInputChange"},droppedFiles:null,submitForm:function(){var t=this,n=void 0;this.droppedFiles?(n=this.droppedFiles[0],this.droppedFiles=null):(n=this.ui.fileInput[0].files[0],this.ui.uploadForm[0].reset());var e=new FileReader;e.onload=function(e){return t.importTemplate(n.name,e.target.result.replace(/^[^,]+,/,""))},e.readAsDataURL(n)},importTemplate:function(e,t){var n=elementor.templates.layout,r={data:{fileName:e,fileData:t},success:function(e){elementor.templates.getTemplatesCollection().add(e),$e.route("wunderwp-library/templates/my-templates")},error:function(e){elementor.templates.showErrorDialog(e),n.showImportView()},complete:function(){n.hideLoadingView()}};elementorCommon.ajax.addRequest("import_template",r),n.showLoadingView()},onRender:function(){this.ui.uploadForm.on({"drag dragstart dragend dragover dragenter dragleave drop":this.onFormActions.bind(this),dragenter:this.onFormDragEnter.bind(this),"dragleave drop":this.onFormDragLeave.bind(this),drop:this.onFormDrop.bind(this)})},onFormActions:function(e){e.preventDefault(),e.stopPropagation()},onFormDragEnter:function(){this.ui.uploadForm.addClass("elementor-drag-over")},onFormDragLeave:function(e){jQuery(e.relatedTarget).closest(this.ui.uploadForm).length||this.ui.uploadForm.removeClass("elementor-drag-over")},onFormDrop:function(e){this.droppedFiles=e.originalEvent.dataTransfer.files,this.submitForm()},onFileInputChange:function(){this.submitForm()}}),t.exports=r},{}],15:[function(e,t,n){"use strict";var r;r=Marionette.ItemView.extend({template:"#tmpl-elementor-template-library-preview",id:"elementor-template-library-preview",ui:{iframe:"> iframe"},onRender:function(){this.ui.iframe.attr("src",this.getOption("url"))}}),t.exports=r},{}],16:[function(e,t,n){"use strict";var r;r=Marionette.ItemView.extend({id:"elementor-template-library-templates-empty",template:"#tmpl-elementor-template-library-templates-empty",ui:{title:".elementor-template-library-blank-title",message:".elementor-template-library-blank-message"},modesStrings:{empty:{title:elementor.translate("templates_empty_title"),message:elementor.translate("templates_empty_message")},noResults:{title:elementor.translate("templates_no_results_title"),message:elementor.translate("templates_no_results_message")},noFavorites:{title:elementor.translate("templates_no_favorites_title"),message:elementor.translate("templates_no_favorites_message")},unconnected:{title:wunderwp_editor.library_unconnected_title,message:wunderwp_editor.library_unconnected_message}},getCurrentMode:function(){return elementor.templates.getFilter("text")?"noResults":elementor.templates.getFilter("favorite")?"noFavorites":wunderwp_editor.is_connected?"empty":"unconnected"},onRender:function(){var e=this.modesStrings[this.getCurrentMode()],t=e.message;"unconnected"===this.getCurrentMode()&&(t+=wunderwp_editor.library_unconnected_button),this.ui.title.html(e.title),this.ui.message.html(t)}}),t.exports=r},{}],17:[function(e,t,n){"use strict";var r,o=e("../template/local"),i=e("../template/remote");r=Marionette.CompositeView.extend({template:"#tmpl-wunderwp-template-library-templates",id:"elementor-template-library-templates",childViewContainer:"#elementor-template-library-templates-container",reorderOnSort:!0,emptyView:function(){return new(e("./templates-empty"))},ui:{textFilter:"#elementor-template-library-filter-text",selectFilter:".elementor-template-library-filter-select",myFavoritesFilter:"#elementor-template-library-filter-my-favorites",orderInputs:".elementor-template-library-order-input",orderLabels:"label.elementor-template-library-order-label"},events:{"input @ui.textFilter":"onTextFilterInput","change @ui.selectFilter":"onSelectFilterChange","change @ui.myFavoritesFilter":"onMyFavoritesFilterChange","mousedown @ui.orderLabels":"onPluginsLabelsClick"},comparators:{title:function(e){return e.get("title").toLowerCase()},popularityIndex:function(e){var t=e.get("popularityIndex");return t=t||e.get("date"),-t},trendIndex:function(e){var t=e.get("trendIndex");return t=t||e.get("date"),-t}},getChildView:function(e){return"pre-made"===e.get("source")?i:o},initialize:function(){this.listenTo(elementor.channels.templates,"filter:change",this._renderChildren)},filter:function(o){var e=wunderwp.editor.templates.getFilterTerms(),i=!0;return jQuery.each(e,function(e){var t=elementor.templates.getFilter(e);if(t){if(this.callback){var n=this.callback.call(o,t);return n||(i=!1),n}var r=t===o.get(e);return r||(i=!1),r}}),i},order:function(e,t){var n=this.comparators[e]||e;t&&(n=this.reverseOrder(n)),this.collection.comparator=n,this.collection.sort()},reverseOrder:function(o){if("function"!=typeof o){var t=o;o=function(e){return e.get(t)}}return function(e,t){var n=o(e),r=o(t);return void 0===n?-1:void 0===r?1:n<r?1:r<n?-1:0}},addSourceData:function(){var e=this.children.isEmpty(),t="pre-made"===elementor.templates.getFilter("source")?"remote":"local";this.$el.attr("data-template-source",e?"empty":t)},setFiltersUI:function(){this.$(this.ui.selectFilter).select2({placeholder:elementor.translate("category"),allowClear:!0,width:150})},setMasonrySkin:function(){var e=new elementorModules.utils.Masonry({container:this.$childViewContainer,items:this.$childViewContainer.children()});this.$childViewContainer.imagesLoaded(e.run.bind(e))},toggleFilterClass:function(){this.$el.toggleClass("elementor-templates-filter-active",!(!elementor.templates.getFilter("text")&&!elementor.templates.getFilter("favorite")))},onRender:function(){"pre-made"===elementor.templates.getFilter("source")&&this.setFiltersUI()},onRenderCollection:function(){this.addSourceData(),this.toggleFilterClass(),"pre-made"===elementor.templates.getFilter("source")&&this.setMasonrySkin()},onBeforeRenderEmpty:function(){this.addSourceData()},onTextFilterInput:function(){elementor.templates.setFilter("text",this.ui.textFilter.val())},onSelectFilterChange:function(e){var t=jQuery(e.currentTarget),n=t.data("elementor-filter");elementor.templates.setFilter(n,t.val())},onMyFavoritesFilterChange:function(){elementor.templates.setFilter("favorite",this.ui.myFavoritesFilter[0].checked)},onOrderLabelsClick:function(e){var t,n=jQuery(e.currentTarget.control);n[0].checked||(t="asc"!==n.data("default-ordering-direction")),n.toggleClass("elementor-template-library-order-reverse",t),this.order(n.val(),n.hasClass("elementor-template-library-order-reverse"))},onPluginsLabelsClick:function(e){var t=jQuery(e.currentTarget.control);elementor.templates.setFilter("plugins",t.val())}}),t.exports=r},{"../template/local":19,"../template/remote":20,"./templates-empty":16}],18:[function(e,t,n){"use strict";var r,o=e("../../behaviors/insert-template");r=Marionette.ItemView.extend({className:function(){var e="elementor-template-library-template",t=this.model.get("source");return e+=" elementor-template-library-template-"+(t="pre-made"===t?"remote":"local"),"pre-made"===t&&(e+=" elementor-template-library-template-"+this.model.get("type")),this.model.get("isPro")&&(e+=" elementor-template-library-pro-template"),e},ui:function(){return{previewButton:".elementor-template-library-template-preview"}},events:function(){return{"click @ui.previewButton":"onPreviewButtonClick"}},behaviors:{insertTemplate:{behaviorClass:o}}}),t.exports=r},{"../../behaviors/insert-template":4}],19:[function(e,t,n){"use strict";var r,o=e("./base");r=o.extend({template:"#tmpl-elementor-template-library-template-local",ui:function(){return _.extend(o.prototype.ui.apply(this,arguments),{deleteButton:".elementor-template-library-template-delete",morePopup:".elementor-template-library-template-more",toggleMore:".elementor-template-library-template-more-toggle",toggleMoreIcon:".elementor-template-library-template-more-toggle i"})},events:function(){return _.extend(o.prototype.events.apply(this,arguments),{"click @ui.deleteButton":"onDeleteButtonClick","click @ui.toggleMore":"onToggleMoreClick"})},onDeleteButtonClick:function(){var e=this.ui.toggleMoreIcon;wunderwp.editor.templates.deleteTemplate(this.model,{onConfirm:function(){e.removeClass("eicon-ellipsis-h").addClass("eicon-loading eicon-animation-spin")},onSuccess:function(e,t,n){wunderwp.editor.templates.getTemplatesCollection().remove(n,{silent:!0}),wunderwp.editor.templates.showTemplates()}})},onToggleMoreClick:function(){this.ui.morePopup.show()},onPreviewButtonClick:function(){open(this.model.get("url"),"_blank")}}),t.exports=r},{"./base":18}],20:[function(e,t,n){"use strict";var r,o=e("./base");r=o.extend({template:"#tmpl-wunderwp-template-library-template-remote",ui:function(){return jQuery.extend(o.prototype.ui.apply(this,arguments),{favoriteCheckbox:".elementor-template-library-template-favorite-input"})},events:function(){return jQuery.extend(o.prototype.events.apply(this,arguments),{"change @ui.favoriteCheckbox":"onFavoriteCheckboxChange"})},onPreviewButtonClick:function(){$e.route("wunderwp-library/preview",{model:this.model})},onFavoriteCheckboxChange:function(){var e=this.ui.favoriteCheckbox[0].checked;this.model.set("favorite",e),elementor.templates.markAsFavorite(this.model,e),!e&&elementor.templates.getFilter("favorite")&&elementor.channels.templates.trigger("filter:change")}}),t.exports=r},{"./base":18}]},{},[3]);