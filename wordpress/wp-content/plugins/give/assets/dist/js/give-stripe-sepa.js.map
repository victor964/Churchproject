{"version":3,"file":"/js/give-stripe-sepa.js","mappings":"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","sources":["webpack://give/./assets/src/js/frontend/give-stripe-sepa.js"],"sourcesContent":["/**\n * Give - Stripe Gateway Add-on JS\n */\nconst stripe = {};\n\ndocument.addEventListener( 'DOMContentLoaded', function( e ) {\n\t// Register Variables.\n\tlet card = {};\n\tlet ibanElements = [];\n\tlet defaultGateway = '';\n\tconst globalIbanElements = [];\n\tlet ibanElementSelectors = [];\n\tconst fontStyles = [];\n\tconst preferredLocale = give_stripe_vars.preferred_locale;\n\tconst formWraps = document.querySelectorAll( '.give-form-wrap' );\n\t\n\t// If font styles are defined, add them to font styles array\n\tif ( Object.keys( give_stripe_vars.element_font_styles ).length !== 0 ) {\n\t\tfontStyles.push( give_stripe_vars.element_font_styles );\n\t}\n\n\t// Loop through the number of forms on the page.\n\tArray.prototype.forEach.call( formWraps, function( formWrap ) {\n\t\tconst formElement = formWrap.querySelector( '.give-form' );\n\n\t\t/**\n\t\t * Bailout, if `formElement` is null.\n\t\t *\n\t\t * We are bailing out here as this script is loaded on every page of the\n\t\t * site but the `formElement` only exists on the pages when Give donation\n\t\t * form is loaded. So, when the pages where the donation form is not loaded\n\t\t * will show console error. To avoid JS console errors we bail it, if\n\t\t * `formElement` is null to avoid console errors.\n\t\t */\n\t\tif ( null === formElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst publishableKey = formElement.getAttribute( 'data-publishable-key' );\n\t\tconst accountId = formElement.getAttribute( 'data-account' );\n\t\tconst idPrefix = formElement.getAttribute( 'data-id' );\n\n\t\t/**\n\t\t * Bailout, when publishable key is not present for a donation form\n\t\t * due to Stripe account not properly attached to the form or global\n\t\t * Stripe account is not added.\n\t\t */\n\t\tif ( null === publishableKey ) {\n\t\t\treturn;\n\t\t}\n\n\t\tstripe[ idPrefix ] = Stripe( publishableKey );\n\n\t\tif ( accountId.trim().length !== 0 ) {\n\t\t\tstripe[ idPrefix ] = Stripe( publishableKey, {\n\t\t\t\tstripeAccount: accountId,\n\t\t\t} );\n\t\t}\n\n\t\tlet elements = stripe[ idPrefix ].elements( {\n\t\t\tlocale: preferredLocale,\n\t\t} );\n\n\t\t// Update fonts of Stripe Elements.\n\t\tif ( fontStyles.length > 0 ) {\n\t\t\telements = stripe[ idPrefix ].elements( {\n\t\t\t\tfonts: fontStyles,\n\t\t\t\tlocale: preferredLocale,\n\t\t\t} );\n\t\t}\n\n\t\tif ( null !== formElement.querySelector( '.give-gateway:checked' ) ) {\n\t\t\tdefaultGateway = formElement.querySelector( '.give-gateway:checked' ).value;\n\t\t}\n\n\t\tconst donateButton = formElement.querySelector( '.give-submit' );\n\n\t\t// Create IBAN Elements for each form.\n\t\tibanElements = giveStripePrepareIbanElements( formElement, elements, idPrefix );\n\n\t\tibanElementSelectors = [ '#give-stripe-sepa-fields-' ];\n\n\t\t// Prepare Card Elements for each form on a single page.\n\t\tglobalIbanElements[ idPrefix ] = [];\n\n\t\tArray.prototype.forEach.call( ibanElementSelectors, function( selector, index ) {\n\t\t\tglobalIbanElements[ idPrefix ][ index ] = [];\n\t\t\tglobalIbanElements[ idPrefix ][ index ].item = ibanElements[ index ];\n\t\t\tglobalIbanElements[ idPrefix ][ index ].selector = selector;\n\t\t\tglobalIbanElements[ idPrefix ][ index ].isCardMounted = false;\n\t\t} );\n\n\t\t// Mount and Un-Mount Stripe CC Fields on gateway load.\n\t\tjQuery( document ).on( 'give_gateway_loaded', function( event, xhr, settings ) {\n\t\t\t// Un-mount card elements when stripe is not the selected gateway.\n\t\t\tgiveStripeUnmountIbanElements( globalIbanElements[ idPrefix ] );\n\n\t\t\tif ( formElement.querySelector( '.give-gateway-option-selected .give-gateway' ).value === 'stripe_sepa' ) {\n\t\t\t\t// Mount card elements when stripe is the selected gateway.\n\t\t\t\tgiveStripeMountIbanElements( idPrefix, globalIbanElements[ idPrefix ] );\n\t\t\t}\n\t\t} );\n\n\t\t// Mount Card Elements, if default gateway is Stripe SEPA.\n\t\tif ( 'stripe_sepa' === defaultGateway ) {\n\t\t\t// Disabled the donate button of the form.\n\t\t\tdonateButton.setAttribute( 'disabled', 'disabled' );\n\n\t\t\tgiveStripeMountIbanElements( idPrefix, globalIbanElements[ idPrefix ] );\n\n\t\t\t// Enable the donate button of the form after successful mounting of CC fields.\n\t\t\tdonateButton.removeAttribute( 'disabled' );\n\t\t} else {\n\t\t\tgiveStripeUnmountIbanElements( ibanElements );\n\t\t}\n\t} );\n\n\t// Process Donation using Stripe Elements on form submission.\n\tjQuery( 'body' ).on( 'submit', '.give-form', function( event ) {\n\t\tconst $form = jQuery( this );\n\t\tconst $idPrefix = $form.find( 'input[name=\"give-form-id-prefix\"]' ).val();\n\n\t\tif ( 'stripe_sepa' === $form.find( 'input.give-gateway:checked' ).val() ) {\n\t\t\tgive_stripe_process_iban( $form, globalIbanElements[ $idPrefix ][ 0 ].item );\n\t\t\tevent.preventDefault();\n\t\t}\n\t} );\n\n\t/**\n\t * Mount Card Elements\n\t *\n\t * @param {string} idPrefix     ID Prefix.\n\t * @param {array}  ibanElements List of card elements to be mounted.\n\t *\n\t * @since 1.6\n\t */\n\tfunction giveStripeMountIbanElements( idPrefix, ibanElements = [] ) {\n\t\tconst ibanElementsLength = Object.keys( ibanElements ).length;\n\n\t\t// Assign any card element to variable to create source.\n\t\tif ( ibanElementsLength > 0 ) {\n\t\t\tcard = ibanElements[ 0 ].item;\n\t\t}\n\n\t\t// Mount required card elements.\n\t\tArray.prototype.forEach.call( ibanElements, function( value, index ) {\n\t\t\tif ( false === value.isCardMounted ) {\n\t\t\t\tvalue.item.mount( value.selector + idPrefix );\n\t\t\t\tvalue.isCardMounted = true;\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Un-mount Card Elements\n\t *\n\t * @param {array} ibanElements List of card elements to be unmounted.\n\t *\n\t * @since 1.6\n\t */\n\tfunction giveStripeUnmountIbanElements( ibanElements = [] ) {\n\t\t// Un-mount required card elements.\n\t\tArray.prototype.forEach.call( ibanElements, function( value, index ) {\n\t\t\tif ( true === value.isCardMounted ) {\n\t\t\t\tvalue.item.unmount();\n\t\t\t\tvalue.isCardMounted = false;\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Create required card elements.\n\t *\n\t * @param {object} formElement Form Element.\n\t * @param {object} elements     Stripe Element.\n\t * @param {string} idPrefix     ID Prefix.\n\t *\n\t * @since 1.6\n\t *\n\t * @return {array} elements\n\t */\n\tfunction giveStripePrepareIbanElements( formElement, elements, idPrefix ) {\n\t\tconst prepareCardElements = [];\n\t\tconst baseStyles = give_stripe_vars.element_base_styles;\n\t\tconst completeStyles = give_stripe_vars.element_complete_styles;\n\t\tconst emptyStyles = give_stripe_vars.element_empty_styles;\n\t\tconst invalidStyles = give_stripe_vars.element_invalid_styles;\n\t\tconst sepaIbanElement = formElement.querySelector( '#give-stripe-sepa-fields-' + idPrefix );\n\n\t\tconst elementStyles = {\n\t\t\tbase: baseStyles,\n\t\t\tcomplete: completeStyles,\n\t\t\tempty: emptyStyles,\n\t\t\tinvalid: invalidStyles,\n\t\t};\n\n\t\tconst elementClasses = {\n\t\t\tfocus: 'focus',\n\t\t\tempty: 'empty',\n\t\t\tinvalid: 'invalid',\n\t\t};\n\n\t\tconst ibanCreateArgs = {\n\t\t\tstyle: elementStyles,\n\t\t\tclasses: elementClasses,\n\t\t\tsupportedCountries: [ 'SEPA' ],\n\t\t};\n\n\t\tif ( 'stripe_sepa' === defaultGateway ) {\n\t\t\tconst hideIcon = sepaIbanElement.getAttribute( 'data-hide_icon' );\n\t\t\tconst iconStyle = sepaIbanElement.getAttribute( 'data-icon_style' );\n\t\t\tconst placeholderCountry = sepaIbanElement.getAttribute( 'data-placeholder_country' );\n\n\t\t\tibanCreateArgs.iconStyle = iconStyle;\n\t\t\tibanCreateArgs.hideIcon = ( 'disabled' !== hideIcon );\n\t\t\tibanCreateArgs.placeholderCountry = placeholderCountry;\n\t\t}\n\n\t\tconst ibanElement = elements.create(\n\t\t\t'iban',\n\t\t\tibanCreateArgs\n\t\t);\n\n\t\tprepareCardElements.push( ibanElement );\n\n\t\treturn prepareCardElements;\n\t}\n\n\t/**\n\t * Stripe Response Handler\n\t *\n\t * @see https://stripe.com/docs/tutorials/forms\n\t *\n\t * @param {object} $form    Form Object.\n\t * @param {object} response Response Object containing source.\n\t */\n\tfunction give_stripe_response_handler( $form, response ) {\n\t\t// Add Source to hidden field for form submission.\n\t\t$form.find( 'input[name=\"give_stripe_payment_method\"]' ).val( response.id );\n\n\t\t// Submit the form.\n\t\t$form.get( 0 ).submit();\n\t}\n\n\t/**\n\t * Stripe Process CC\n\t *\n\t * @param {object} $form Form Object.\n\t * @param {object} $iban IBAN Object.\n\t *\n\t * @returns {boolean} True or False.\n\t */\n\tfunction give_stripe_process_iban( $form, $iban ) {\n\t\tconst additionalData = {\n\t\t\tbilling_details: {\n\t\t\t\tname: '',\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\t\tconst $form_id = $form.find( 'input[name=\"give-form-id\"]' ).val();\n\t\tconst idPrefix = $form.find( 'input[name=\"give-form-id-prefix\"]' ).val();\n\t\tconst $firstName = $form.find( 'input[name=\"give_first\"]' ).val();\n\t\tconst $lastName = $form.find( 'input[name=\"give_last\"]' ).val();\n\t\tconst $email = $form.find( 'input[name=\"give_email\"]' ).val();\n\t\tconst $form_submit_btn = $form.find( '[id^=give-purchase-button]' );\n\n\t\t// Disable the submit button to prevent repeated clicks.\n\t\t$form.find( '[id^=give-purchase-button]' ).attr( 'disabled', 'disabled' );\n\n\t\tadditionalData.billing_details.name = $firstName + ' ' + $lastName;\n\t\tadditionalData.billing_details.email = $email;\n\n\t\t// Gather additional customer data we may have collected in our form.\n\t\tif ( give_stripe_vars.checkout_address && ! give_stripe_vars.stripe_card_update ) {\n\t\t\tconst address1 = $form.find( '.card-address' ).val();\n\t\t\tconst address2 = $form.find( '.card-address-2' ).val();\n\t\t\tconst city = $form.find( '.card-city' ).val();\n\t\t\tconst state = $form.find( '.card_state' ).val();\n\t\t\tconst zip = $form.find( '.card-zip' ).val();\n\t\t\tconst country = $form.find( '.billing-country' ).val();\n\n\t\t\tadditionalData.billing_details.address = {\n\t\t\t\tline1: address1 ? address1 : '',\n\t\t\t\tline2: address2 ? address2 : '',\n\t\t\t\tcity: city ? city : '',\n\t\t\t\tstate: state ? state : '',\n\t\t\t\tpostal_code: zip ? zip : '',\n\t\t\t\tcountry: country ? country : '',\n\t\t\t};\n\t\t}\n\n\t\t// createPaymentMethod returns immediately - the supplied callback submits the form if there are no errors.\n\t\tstripe[ idPrefix ].createPaymentMethod( 'sepa_debit', $iban, additionalData ).then( function( result ) {\n\t\t\tif ( result.error ) {\n\t\t\t\tconst error = `<div class=\"give_errors\"><p class=\"give_error\">${ result.error.message }</p></div>`;\n\n\t\t\t\t// re-enable the submit button.\n\t\t\t\t$form_submit_btn.attr( 'disabled', false );\n\n\t\t\t\t// Hide the loading animation.\n\t\t\t\tjQuery( '.give-loading-animation' ).fadeOut();\n\n\t\t\t\t// Display Error on the form.\n\t\t\t\t$form.find( '[id^=give-stripe-payment-errors-' + $form_id + ']' ).html( error );\n\n\t\t\t\t// Reset Donate Button.\n\t\t\t\tif ( give_global_vars.complete_purchase ) {\n\t\t\t\t\t$form_submit_btn.val( give_global_vars.complete_purchase );\n\t\t\t\t} else {\n\t\t\t\t\t$form_submit_btn.val( $form_submit_btn.data( 'before-validation-label' ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Send payment method to server for processing payment.\n\t\t\t\tgive_stripe_response_handler( $form, result.paymentMethod );\n\t\t\t}\n\t\t} );\n\n\t\treturn false; // Submit from callback.\n\t}\n} );\n"],"names":["stripe","document","addEventListener","e","card","ibanElements","defaultGateway","globalIbanElements","ibanElementSelectors","fontStyles","preferredLocale","give_stripe_vars","preferred_locale","formWraps","querySelectorAll","Object","keys","element_font_styles","length","push","Array","prototype","forEach","call","formWrap","formElement","querySelector","publishableKey","getAttribute","accountId","idPrefix","Stripe","trim","stripeAccount","elements","locale","fonts","value","donateButton","giveStripePrepareIbanElements","selector","index","item","isCardMounted","jQuery","on","event","xhr","settings","giveStripeUnmountIbanElements","giveStripeMountIbanElements","setAttribute","removeAttribute","$form","$idPrefix","find","val","give_stripe_process_iban","preventDefault","ibanElementsLength","mount","unmount","prepareCardElements","baseStyles","element_base_styles","completeStyles","element_complete_styles","emptyStyles","element_empty_styles","invalidStyles","element_invalid_styles","sepaIbanElement","elementStyles","base","complete","empty","invalid","elementClasses","focus","ibanCreateArgs","style","classes","supportedCountries","hideIcon","iconStyle","placeholderCountry","ibanElement","create","give_stripe_response_handler","response","id","get","submit","$iban","additionalData","billing_details","name","email","$form_id","$firstName","$lastName","$email","$form_submit_btn","attr","checkout_address","stripe_card_update","address1","address2","city","state","zip","country","address","line1","line2","postal_code","createPaymentMethod","then","result","error","message","fadeOut","html","give_global_vars","complete_purchase","data","paymentMethod"],"sourceRoot":""}