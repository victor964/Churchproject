{"version":3,"file":"/js/give-stripe-becs.js","mappings":"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","sources":["webpack://give/./assets/src/js/frontend/give-stripe-becs.js"],"sourcesContent":["/**\n * Give - Stripe BECS Payment Method JS\n */\nconst stripe = {};\n\ndocument.addEventListener( 'DOMContentLoaded', function( e ) {\n\t// Register Variables.\n\tlet card = {};\n\tlet bankAccountElements = [];\n\tlet defaultGateway = '';\n\tconst globalIbanElements = [];\n\tlet bankAccountElementSelectors = [];\n\tconst fontStyles = [];\n\tconst preferredLocale = give_stripe_vars.preferred_locale;\n\tconst formWraps = document.querySelectorAll( '.give-form-wrap' );\n\n\t// If font styles are defined, add them to font styles array\n\tif ( Object.keys( give_stripe_vars.element_font_styles ).length !== 0 ) {\n\t\tfontStyles.push( give_stripe_vars.element_font_styles );\n\t}\n\n\t// Loop through the number of forms on the page.\n\tArray.prototype.forEach.call( formWraps, function( formWrap ) {\n\t\tconst formElement = formWrap.querySelector( '.give-form' );\n\n\t\t/**\n\t\t * Bailout, if `formElement` is null.\n\t\t *\n\t\t * We are bailing out here as this script is loaded on every page of the\n\t\t * site but the `formElement` only exists on the pages when Give donation\n\t\t * form is loaded. So, when the pages where the donation form is not loaded\n\t\t * will show console error. To avoid JS console errors we bail it, if\n\t\t * `formElement` is null to avoid console errors.\n\t\t */\n\t\tif ( null === formElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst publishableKey = formElement.getAttribute( 'data-publishable-key' );\n\t\tconst accountId = formElement.getAttribute( 'data-account' );\n\t\tconst idPrefix = formElement.getAttribute( 'data-id' );\n\n\t\t/**\n\t\t * Bailout, when publishable key is not present for a donation form\n\t\t * due to Stripe account not properly attached to the form or global\n\t\t * Stripe account is not added.\n\t\t */\n\t\tif ( null === publishableKey ) {\n\t\t\treturn;\n\t\t}\n\n\t\tstripe[ idPrefix ] = Stripe( publishableKey );\n\n\t\tif ( accountId.trim().length !== 0 ) {\n\t\t\tstripe[ idPrefix ] = Stripe( publishableKey, {\n\t\t\t\tstripeAccount: accountId,\n\t\t\t} );\n\t\t}\n\n\t\tlet elements = stripe[ idPrefix ].elements( {\n\t\t\tlocale: preferredLocale,\n\t\t} );\n\n\t\t// Update fonts of Stripe Elements.\n\t\tif ( fontStyles.length > 0 ) {\n\t\t\telements = stripe[ idPrefix ].elements( {\n\t\t\t\tfonts: fontStyles,\n\t\t\t\tlocale: preferredLocale,\n\t\t\t} );\n\t\t}\n\n\t\tif ( null !== formElement.querySelector( '.give-gateway:checked' ).value ) {\n\t\t\tdefaultGateway = formElement.querySelector( '.give-gateway:checked' ).value;\n\t\t}\n\n\t\tconst donateButton = formElement.querySelector( '.give-submit' );\n\n\t\t// Create IBAN Elements for each form.\n\t\tbankAccountElements = giveStripePrepareIbanElements( formElement, elements, idPrefix );\n\n\t\tbankAccountElementSelectors = [ '#give-stripe-becs-fields-' ];\n\n\t\t// Prepare Card Elements for each form on a single page.\n\t\tglobalIbanElements[ idPrefix ] = [];\n\n\t\tArray.prototype.forEach.call( bankAccountElementSelectors, function( selector, index ) {\n\t\t\tglobalIbanElements[ idPrefix ][ index ] = [];\n\t\t\tglobalIbanElements[ idPrefix ][ index ].item = bankAccountElements[ index ];\n\t\t\tglobalIbanElements[ idPrefix ][ index ].selector = selector;\n\t\t\tglobalIbanElements[ idPrefix ][ index ].isCardMounted = false;\n\t\t} );\n\n\t\t// Mount and Un-Mount Stripe CC Fields on gateway load.\n\t\tjQuery( document ).on( 'give_gateway_loaded', function( event, xhr, settings ) {\n\t\t\t// Un-mount card elements when stripe is not the selected gateway.\n\t\t\tgiveStripeUnmountIbanElements( globalIbanElements[ idPrefix ] );\n\n\t\t\tif ( formElement.querySelector( '.give-gateway-option-selected .give-gateway' ).value === 'stripe_becs' ) {\n\t\t\t\t// Mount card elements when stripe is the selected gateway.\n\t\t\t\tgiveStripeMountIbanElements( idPrefix, globalIbanElements[ idPrefix ] );\n\t\t\t}\n\t\t} );\n\n\t\t// Mount Card Elements, if default gateway is Stripe BECS.\n\t\tif ( 'stripe_becs' === defaultGateway || give_stripe_vars.stripe_becs_update ) {\n\t\t\t// Disabled the donate button of the form.\n\t\t\tdonateButton.setAttribute( 'disabled', 'disabled' );\n\n\t\t\tgiveStripeMountIbanElements( idPrefix, globalIbanElements[ idPrefix ] );\n\n\t\t\t// Enable the donate button of the form after successful mounting of CC fields.\n\t\t\tdonateButton.removeAttribute( 'disabled' );\n\t\t} else {\n\t\t\tgiveStripeUnmountIbanElements( bankAccountElements );\n\t\t}\n\t} );\n\n\t// Process Donation using Stripe Elements on form submission.\n\tjQuery( 'body' ).on( 'submit', '.give-form', function( event ) {\n\t\tconst $form = jQuery( this );\n\t\tconst $idPrefix = $form.find( 'input[name=\"give-form-id-prefix\"]' ).val();\n\n\t\tif ( 'stripe_becs' === $form.find( 'input.give-gateway:checked' ).val() || give_stripe_vars.stripe_becs_update ) {\n\t\t\tgive_stripe_process_becs_bank_account( $form, globalIbanElements[ $idPrefix ][ 0 ].item );\n\t\t\tevent.preventDefault();\n\t\t}\n\t} );\n\n\t/**\n\t * Mount IBAN Elements\n\t *\n\t * @param {string} idPrefix     ID Prefix.\n\t * @param {array}  bankAccountElements List of card elements to be mounted.\n\t *\n\t * @since 2.6.3\n\t */\n\tfunction giveStripeMountIbanElements( idPrefix, bankAccountElements = [] ) {\n\t\tconst bankAccountElementsLength = Object.keys( bankAccountElements ).length;\n\n\t\t// Assign any card element to variable to create source.\n\t\tif ( bankAccountElementsLength > 0 ) {\n\t\t\tcard = bankAccountElements[ 0 ].item;\n\t\t}\n\n\t\t// Mount required card elements.\n\t\tArray.prototype.forEach.call( bankAccountElements, function( value, index ) {\n\t\t\tif ( false === value.isCardMounted ) {\n\t\t\t\tvalue.item.mount( value.selector + idPrefix );\n\t\t\t\tvalue.isCardMounted = true;\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Un-mount IBAN Elements\n\t *\n\t * @param {array} bankAccountElements List of card elements to be unmounted.\n\t *\n\t * @since 2.6.3\n\t */\n\tfunction giveStripeUnmountIbanElements( bankAccountElements = [] ) {\n\t\t// Un-mount required card elements.\n\t\tArray.prototype.forEach.call( bankAccountElements, function( value, index ) {\n\t\t\tif ( true === value.isCardMounted ) {\n\t\t\t\tvalue.item.unmount();\n\t\t\t\tvalue.isCardMounted = false;\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Create required IBAN elements.\n\t *\n\t * @param {object} formElement Form Element.\n\t * @param {object} elements     Stripe Element.\n\t * @param {string} idPrefix     ID Prefix.\n\t *\n\t * @since 2.6.3\n\t *\n\t * @return {array} elements\n\t */\n\tfunction giveStripePrepareIbanElements( formElement, elements, idPrefix ) {\n\t\tconst prepareCardElements = [];\n\t\tconst baseStyles = give_stripe_vars.element_base_styles;\n\t\tconst completeStyles = give_stripe_vars.element_complete_styles;\n\t\tconst emptyStyles = give_stripe_vars.element_empty_styles;\n\t\tconst invalidStyles = give_stripe_vars.element_invalid_styles;\n\t\tconst becsElement = formElement.querySelector( '#give-stripe-becs-fields-' + idPrefix );\n\n\t\tconst elementStyles = {\n\t\t\tbase: baseStyles,\n\t\t\tcomplete: completeStyles,\n\t\t\tempty: emptyStyles,\n\t\t\tinvalid: invalidStyles,\n\t\t};\n\n\t\tconst elementClasses = {\n\t\t\tfocus: 'focus',\n\t\t\tempty: 'empty',\n\t\t\tinvalid: 'invalid',\n\t\t};\n\n\t\tconst bankAccountCreateArgs = {\n\t\t\tstyle: elementStyles,\n\t\t\tclasses: elementClasses,\n\t\t};\n\n\t\tif ( 'stripe_becs' === defaultGateway ) {\n\t\t\tconst hideIcon = becsElement.getAttribute( 'data-hide_icon' );\n\t\t\tconst iconStyle = becsElement.getAttribute( 'data-icon_style' );\n\n\t\t\tbankAccountCreateArgs.iconStyle = iconStyle;\n\t\t\tbankAccountCreateArgs.hideIcon = ( 'disabled' === hideIcon );\n\t\t}\n\n\t\tconst bankAccountElement = elements.create(\n\t\t\t'auBankAccount',\n\t\t\tbankAccountCreateArgs\n\t\t);\n\n\t\tprepareCardElements.push( bankAccountElement );\n\n\t\treturn prepareCardElements;\n\t}\n\n\t/**\n\t * Stripe Response Handler\n\t *\n\t * @see https://stripe.com/docs/tutorials/forms\n\t *\n\t * @param {object} $form    Form Object.\n\t * @param {object} response Response Object containing source.\n\t */\n\tfunction give_stripe_response_handler( $form, response ) {\n\t\t// Add Source to hidden field for form submission.\n\t\t$form.find( 'input[name=\"give_stripe_payment_method\"]' ).val( response.id );\n\n\t\t// Submit the form.\n\t\t$form.get( 0 ).submit();\n\t}\n\n\t/**\n\t * Stripe Process BECS payment.\n\t *\n\t * @param {object} $form Form Object.\n\t * @param {object} $iban IBAN Object.\n\t *\n\t * @returns {boolean} True or False.\n\t */\n\tfunction give_stripe_process_becs_bank_account( $form, $iban ) {\n\t\tconst additionalData = {\n\t\t\tbilling_details: {\n\t\t\t\tname: '',\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\t\tconst $form_id = $form.find( 'input[name=\"give-form-id\"]' ).val();\n\t\tconst idPrefix = $form.find( 'input[name=\"give-form-id-prefix\"]' ).val();\n\t\tconst $firstName = $form.find( 'input[name=\"give_first\"]' ).val();\n\t\tconst $lastName = $form.find( 'input[name=\"give_last\"]' ).val();\n\t\tconst $email = $form.find( 'input[name=\"give_email\"]' ).val();\n\t\tconst $form_submit_btn = $form.find( '[id^=give-purchase-button]' );\n\n\t\t// Disable the submit button to prevent repeated clicks.\n\t\t$form.find( '[id^=give-purchase-button]' ).attr( 'disabled', 'disabled' );\n\n\t\tadditionalData.billing_details.name = $firstName + ' ' + $lastName;\n\t\tadditionalData.billing_details.email = $email;\n\n\t\t// Gather additional customer data we may have collected in our form.\n\t\tif ( give_stripe_vars.checkout_address && ! give_stripe_vars.stripe_becs_update ) {\n\t\t\tconst address1 = $form.find( '.card-address' ).val();\n\t\t\tconst address2 = $form.find( '.card-address-2' ).val();\n\t\t\tconst city = $form.find( '.card-city' ).val();\n\t\t\tconst state = $form.find( '.card_state' ).val();\n\t\t\tconst zip = $form.find( '.card-zip' ).val();\n\t\t\tconst country = $form.find( '.billing-country' ).val();\n\n\t\t\tadditionalData.billing_details.address = {\n\t\t\t\tline1: address1 ? address1 : '',\n\t\t\t\tline2: address2 ? address2 : '',\n\t\t\t\tcity: city ? city : '',\n\t\t\t\tstate: state ? state : '',\n\t\t\t\tpostal_code: zip ? zip : '',\n\t\t\t\tcountry: country ? country : '',\n\t\t\t};\n\t\t}\n\n\t\t// createPaymentMethod returns immediately - the supplied callback submits the form if there are no errors.\n\t\tstripe[ idPrefix ].createPaymentMethod( 'au_becs_debit', $iban, additionalData ).then( function( result ) {\n\t\t\tif ( result.error ) {\n\t\t\t\tconst error = `<div class=\"give_errors\"><p class=\"give_error\">${ result.error.message }</p></div>`;\n\n\t\t\t\t// re-enable the submit button.\n\t\t\t\t$form_submit_btn.attr( 'disabled', false );\n\n\t\t\t\t// Hide the loading animation.\n\t\t\t\tjQuery( '.give-loading-animation' ).fadeOut();\n\n\t\t\t\t// Display Error on the form.\n\t\t\t\t$form.find( '[id^=give-stripe-payment-errors-' + $form_id + ']' ).html( error );\n\n\t\t\t\t// Reset Donate Button.\n\t\t\t\tif ( give_global_vars.complete_purchase ) {\n\t\t\t\t\t$form_submit_btn.val( give_global_vars.complete_purchase );\n\t\t\t\t} else {\n\t\t\t\t\t$form_submit_btn.val( $form_submit_btn.data( 'before-validation-label' ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Send payment method to server for processing payment.\n\t\t\t\tgive_stripe_response_handler( $form, result.paymentMethod );\n\t\t\t}\n\t\t} );\n\n\t\treturn false; // Submit from callback.\n\t}\n} );\n"],"names":["stripe","document","addEventListener","e","card","bankAccountElements","defaultGateway","globalIbanElements","bankAccountElementSelectors","fontStyles","preferredLocale","give_stripe_vars","preferred_locale","formWraps","querySelectorAll","Object","keys","element_font_styles","length","push","Array","prototype","forEach","call","formWrap","formElement","querySelector","publishableKey","getAttribute","accountId","idPrefix","Stripe","trim","stripeAccount","elements","locale","fonts","value","donateButton","giveStripePrepareIbanElements","selector","index","item","isCardMounted","jQuery","on","event","xhr","settings","giveStripeUnmountIbanElements","giveStripeMountIbanElements","stripe_becs_update","setAttribute","removeAttribute","$form","$idPrefix","find","val","give_stripe_process_becs_bank_account","preventDefault","bankAccountElementsLength","mount","unmount","prepareCardElements","baseStyles","element_base_styles","completeStyles","element_complete_styles","emptyStyles","element_empty_styles","invalidStyles","element_invalid_styles","becsElement","elementStyles","base","complete","empty","invalid","elementClasses","focus","bankAccountCreateArgs","style","classes","hideIcon","iconStyle","bankAccountElement","create","give_stripe_response_handler","response","id","get","submit","$iban","additionalData","billing_details","name","email","$form_id","$firstName","$lastName","$email","$form_submit_btn","attr","checkout_address","address1","address2","city","state","zip","country","address","line1","line2","postal_code","createPaymentMethod","then","result","error","message","fadeOut","html","give_global_vars","complete_purchase","data","paymentMethod"],"sourceRoot":""}